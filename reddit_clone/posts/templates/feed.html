{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">

    <!-- üü¶ –ë–ª–æ–∫ –æ–≥–æ–ª–æ—à–µ–Ω—å -->
    <h2 class="mb-3">–û–≥–æ–ª–æ—à–µ–Ω–Ω—è</h2>

    {% if announcements %}
        <div class="list-group mb-4">
            {% for a in announcements %}
                <div class="list-group-item">
                    <h5 class="mb-1">{{ a.title }}</h5>
                    <p class="mb-1">{{ a.text }}</p>
                    <small class="text-muted">{{ a.created_at|date:"d.m.Y H:i" }}</small>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-muted">–ü–æ–∫–∏ –Ω–µ–º–∞—î –æ–≥–æ–ª–æ—à–µ–Ω—å.</p>
    {% endif %}


    <!-- üüß –ü–æ–ø—É–ª—è—Ä–Ω—ñ —Å—Ç–∞—Ç—Ç—ñ -->
    <h3 class="mb-3">üî• –ü–æ–ø—É–ª—è—Ä–Ω—ñ —Å—Ç–∞—Ç—Ç—ñ</h3>
    {% for art in popular_articles %}
        <p>
            <a href="{% url 'article_detail' art.pk %}">
                {{ art.title }}
            </a>
            ({{ art.likes.count }} ‚ù§Ô∏è)
        </p>
    {% empty %}
        <p class="text-muted">–ù–µ–º–∞—î –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö —Å—Ç–∞—Ç–µ–π.</p>
    {% endfor %}


    <!-- üü® –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó -->
    <h3 class="mt-4">üìÅ –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</h3>
    {% for cat in categories %}
        <span class="badge bg-secondary me-1">{{ cat.name }}</span>
    {% empty %}
        <p class="text-muted">–ö–∞—Ç–µ–≥–æ—Ä—ñ–π –Ω–µ–º–∞—î.</p>
    {% endfor %}


    <!-- üü© –¢–µ–≥–∏ -->
    <h3 class="mt-4">üè∑Ô∏è –¢–µ–≥–∏</h3>
    {% for tg in tags %}
        <span class="badge bg-info text-dark me-1">{{ tg.name }}</span>
    {% empty %}
        <p class="text-muted">–¢–µ–≥—ñ–≤ –Ω–µ–º–∞—î.</p>
    {% endfor %}


    <hr class="mt-4 mb-4">

    <!-- üü¶ –û—Å–Ω–æ–≤–Ω—ñ —Å—Ç–∞—Ç—Ç—ñ -->
    <h2 class="mb-4">–°—Ç—Ä—ñ—á–∫–∞ —Å—Ç–∞—Ç–µ–π</h2>

    {% for article in articles %}
        <div class="card mb-3 shadow-sm">
            <div class="card-body">

                <h4>
                    <a href="{% url 'article_detail' article.pk %}" class="text-decoration-none">
                        {{ article.title }}
                    </a>
                </h4>

                <p class="text-muted mb-1">
                    –ö–∞—Ç–µ–≥–æ—Ä—ñ—è: {{ article.category.name }}
                </p>

                <div class="mb-2">
                    {% for tag in article.tags.all %}
                        <span class="badge bg-primary">{{ tag.name }}</span>
                    {% endfor %}
                </div>

                <p>{{ article.content|truncatewords:25 }}</p>

                <div class="d-flex justify-content-between">
                    <small class="text-muted">{{ article.created_at|date:"d.m.Y H:i" }}</small>
                    <span>‚ù§Ô∏è {{ article.likes.count }}</span>
                </div>

            </div>
        </div>
    {% empty %}
        <p class="text-muted">–ü–æ–∫–∏ –Ω–µ–º–∞—î —Å—Ç–∞—Ç–µ–π.</p>
    {% endfor %}

</div>
{% endblock %}

